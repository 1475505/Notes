# 存储

| 存储架构    | 特点 | client |
| ----------- | ---- | ---- |
| 块存储      |  硬件分块，读写快    |   读写软件系统，如DB   |
| 文件存储    | 维护存储介质数据结构，便于按单元共享     |   人~~/Linux哲学~~   |
| 对象存储OSS | 元数据独立 + 控制节点     | 其他计算机软件     |

# Lamport 逻辑时钟细节
分布式系统中按是否存在节点交互可分为三类事件，一类发生于节点内部，二是发送事件，三是接收事件。**时间不一致的问题在节点交互上出现**。

> **逻辑时钟**（logical clocks），使用了自增的计数器，而非石英晶振（oscillating quartz crystal）。逻辑时钟不会追踪**自然时间**或者**耗时间隔**，而仅用来确定的系统中事件发生的先后顺序。
> 其将严格的物理时间戳比较拓展成**偏序**比较逻辑时间戳，表示为**因果关系**。即，如果事件$A\rightarrow B$（A `happens before` B），则时间戳$T(A) < T(B)$. 逆命题不成立。

Lamport 逻辑时钟的定义规则：
1.  每个事件对应一个Lamport时间戳，初始值为0
2.  如果事件在节点内发生，本地进程中的时间戳加1
3.  如果事件属于发送事件，本地进程中的时间戳加1并在消息中带上该时间戳
4.  如果事件属于接收事件，本地进程中的时间戳 = Max(本地时间戳，消息中的时间戳) + 1
![](http://img.070077.xyz/20230114005703.png)


